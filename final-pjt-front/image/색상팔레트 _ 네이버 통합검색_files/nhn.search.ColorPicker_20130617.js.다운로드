/* release date : 2013-05-28 */
nhn=typeof nhn=="undefined"?{}:nhn;nhn.ColorConverter={hexToCMYK:function(d){var c=0;var j=0;var e=0;var k=0;d=(d.charAt(0)=="#")?d.substring(1,7):d;var a=parseInt(d.substring(0,2),16);var h=parseInt(d.substring(2,4),16);var i=parseInt(d.substring(4,6),16);if(a==0&&h==0&&i==0){k=1;return{C:0,M:0,Y:0,K:1};}c=1-(a/255);j=1-(h/255);e=1-(i/255);var f=Math.min(c,Math.min(j,e));c=(c-f)/(1-f);j=(j-f)/(1-f);e=(e-f)/(1-f);k=f;return{C:Math.round(c*1000)/10,M:Math.round(j*1000)/10,Y:Math.round(e*1000)/10,K:Math.round(k*1000)/10};},hextoRGB:function(b){var a={};a.R=this._decimalize(b.substring(1,3));a.G=this._decimalize(b.substring(3,5));a.B=this._decimalize(b.substring(5,7));return a;},_decimalize:function(a){var b="0123456789ABCDEF";return((b.indexOf(a.charAt(0).toUpperCase())*16)+b.indexOf(a.charAt(1).toUpperCase()));},RGBtoHSB:function(a,e,f){a=a/255;e=e/255;f=f/255;var k={};var j=Math.min(a,e,f);var l=Math.max(a,e,f);var i=l-j;k.B=l;if(i==0){k.H=0;k.S=0;}else{k.S=i/l;var h=(((l-a)/6)+(i/2))/i;var c=(((l-e)/6)+(i/2))/i;var d=(((l-f)/6)+(i/2))/i;if(a==l){k.H=d-c;}else{if(e==l){k.H=(1/3)+h-d;}else{if(f==l){k.H=(2/3)+c-h;}}}if(k.H<0){k.H+=1;}if(k.H>1){k.H-=1;}}k.H*=360;k.S*=100;k.B*=100;return{H:Math.round(k.H*100)/100,S:Math.round(k.S*100)/100,B:Math.round(k.B*100)/100};},RGBtoHex:function(b,a,c){return this._toHex(b)+this._toHex(a)+this._toHex(c);},_toHex:function(d){var e="0123456789ABCDEF";var c=d%16;var b=(d-c)/16;var a=e.charAt(b)+e.charAt(c);return a;},HSBtoRGB:function(d,c,b){var d=d/360;var c=c/100;var b=b/100;var a={};if(c==0){a.R=b*255;a.G=b*255;a.B=b*255;}else{var_h=d*6;var_i=Math.floor(var_h);var_1=b*(1-c);var_2=b*(1-c*(var_h-var_i));var_3=b*(1-c*(1-(var_h-var_i)));if(var_i==0){var_r=b;var_g=var_3;var_b=var_1;}else{if(var_i==1){var_r=var_2;var_g=b;var_b=var_1;}else{if(var_i==2){var_r=var_1;var_g=b;var_b=var_3;}else{if(var_i==3){var_r=var_1;var_g=var_2;var_b=b;}else{if(var_i==4){var_r=var_3;var_g=var_1;var_b=b;}else{var_r=b;var_g=var_1;var_b=var_2;}}}}}a.R=var_r*255;a.G=var_g*255;a.B=var_b*255;}return{R:Math.round(a.R),G:Math.round(a.G),B:Math.round(a.B)};},CMYKtoRGB:function(f,i,e,b){var h=f/100;var a=i/100;var g=e/100;var d=b/100;return{R:Math.round((1-Math.min(1,h*(1-d)+d))*255),G:Math.round((1-Math.min(1,a*(1-d)+d))*255),B:Math.round((1-Math.min(1,g*(1-d)+d))*255)};}};nhn.search=nhn.search||{};nhn.search.ColorPicker=$Class({_htSelected:{HEX:"",RGB:{R:"",G:"",B:""},HSB:{H:"",S:"",B:""},CMYK:{C:"",M:"",Y:"",K:""}},$init:function(a){this._oConverter=nhn.ColorConverter;this._assignElement(a.elContent,a.elInputHex);this._oTplExpandColor=$Template(a.tpl.expandColor);this._setEvent();this._initHex(a.initHex);},_initHex:function(c){this._htSelected.HEX=c=c.substr(0,7).toUpperCase();this._makeExpandColors(c);var b=this._hextoRGB(c);var d=this._RGBtoHSB(b.R,b.G,b.B);var a=this._hexToCMYK(c);this._updateHex(c);this._updateRGB(b.R,b.G,b.B);this._updateHSB(d.H,d.S,d.B);this._updateCMYK(a.C,a.M,a.Y,a.K);this._markSelect(c,2);},_assignElement:function(c,b){this._elContent=c;this._elInputHex=b;this._waElInputRightSide=$A($$(".rgb_section2 input",c));this._welColorDisplay=$Element($$.getSingle(".rgb_selec",c));this._elExpandColor=$$.getSingle("ul.picker_type2",c);this._refreshColorArray();var d=$$(".color_rgb > input",c);this._elInputRGB_R=d[0];this._elInputRGB_G=d[1];this._elInputRGB_B=d[2];var e=$$(".color_hsb > input",c);this._elInputHSB_H=e[0];this._elInputHSB_S=e[1];this._elInputHSB_B=e[2];var a=$$(".color_cmyk > input",c);this._elInputC=a[0];this._elInputM=a[1];this._elInputY=a[2];this._elInputK=a[3];},_setEvent:function(){$Fn(this._onClick,this).attach(this._elContent,"click");$Fn(this._onBlurHex,this).attach(this._elInputHex,"blur");$Fn(this._onBlurRGB,this).attach([this._elInputRGB_R,this._elInputRGB_G,this._elInputRGB_B],"blur");$Fn(this._onBlurHSB,this).attach([this._elInputHSB_H,this._elInputHSB_S,this._elInputHSB_B],"blur");$Fn(this._onBlurCMYK,this).attach([this._elInputC,this._elInputM,this._elInputY,this._elInputK],"blur");$Fn(this._onKeyUpHex,this).attach(this._elInputHex,"keyup");$Fn(this._onKeyUpRGB,this).attach([this._elInputRGB_R,this._elInputRGB_G,this._elInputRGB_B],"keyup");$Fn(this._onKeyUpHSB,this).attach([this._elInputHSB_H,this._elInputHSB_S,this._elInputHSB_B],"keyup");$Fn(this._onKeyUpCMYK,this).attach([this._elInputC,this._elInputM,this._elInputY,this._elInputK],"keyup");$Fn(this._onFocusHexInput,this).attach(this._elInputHex,"focus");$Fn(this._onFocusRightSideInput,this).attach(this._waElInputRightSide.$value(),"focus");},_onFocusHexInput:function(b){var a=b.element;if(a.value==""){a.value="#";}this._deSelectRightSideInput();this._clickCROnInputFocus(b);},_onFocusRightSideInput:function(a){this._deSelectRightSideInput();$Element(a.element).addClass("on");this._clickCROnInputFocus(a);},_deSelectRightSideInput:function(){this._waElInputRightSide.forEach(function(c,d,b){$Element(c).removeClass("on");});},_onClick:function(c){var b=c.element;var i=$$.getSingle("! a",b);if(i){b=i;}if(b.tagName.toLowerCase()!="button"&&b.tagName.toLowerCase()!="a"){return false;}var d=b.className;if(d.indexOf("_selectColor")>-1){var a=$Element(b);var e=$S(a.text()).trim().$value().substr(0,7);if(a.query("!ul")!=this._elExpandColor){this._makeExpandColors(e);this._markSelect(e,2);}else{a.addClass("on");this._markSelect(e,1);}var h=this._hextoRGB(e);var f=this._RGBtoHSB(h.R,h.G,h.B);var g=this._hexToCMYK(e);this._updateHex(e);this._updateRGB(h.R,h.G,h.B);this._updateHSB(f.H,f.S,f.B);this._updateCMYK(g.C,g.M,g.Y,g.K);}},_onKeyUpHex:function(a){if(a.key().enter){this._convertBaseOnHex(a.element);}},_onKeyUpRGB:function(a){if(a.key().enter){this._convertBaseOnRGB(a.element);}},_onKeyUpHSB:function(a){if(a.key().enter){this._convertBaseOnHSB(a.element);}},_onKeyUpCMYK:function(a){if(a.key().enter){this._convertBaseOnCMYK(a.element);}},_onBlurHex:function(a){this._convertBaseOnHex(a.element);},_onBlurRGB:function(a){this._convertBaseOnRGB(a.element);},_onBlurHSB:function(a){this._convertBaseOnHSB(a.element);},_onBlurCMYK:function(a){this._convertBaseOnCMYK(a.element);},_convertBaseOnHex:function(b){b.value=$S(b.value).trim();var g=b.value;if(g.substr(0,1)!="#"){g="#"+g;}var d=g;if(d.length==4){var c=g.substr(1,1);var h=g.substr(2,1);var a=g.substr(3,1);d="#"+c+c+h+h+a+a;}if(this._chkVaildHex(d.substr(1,7))){this._updateHex(d);var i=this._hextoRGB(d);var e=this._RGBtoHSB(i.R,i.G,i.B);var f=this._hexToCMYK(d);this._updateRGB(i.R,i.G,i.B);this._updateHSB(e.H,e.S,e.B);this._updateCMYK(f.C,f.M,f.Y,f.K);this._markSelect(d,2);this._htSelected.HEX=b.value=d.toUpperCase();}else{b.value=this._htSelected.HEX;}},_convertBaseOnRGB:function(b){var j=this._getRGBValue();var c=this._getRGBInput();var i=false;$H(c).forEach(function(l,m,k){if(l==b&&Math.round(j[m])!=b.value){i=true;}});if(i){var d=Math.round(c.R.value);var h=Math.round(c.G.value);var a=Math.round(c.B.value);if(!this._chkVaildRGB(d,h,a)){var j=this._htSelected.RGB;this._updateRGB(j.R,j.G,j.B);return;}else{this._htSelected.RGB={R:d,G:h,B:a};var j=this._htSelected.RGB;this._updateRGB(j.R,j.G,j.B);}var e=this._RGBtoHex(d,h,a);var f=this._RGBtoHSB(d,h,a);var g=this._hexToCMYK(e);this._updateHex(e);this._updateHSB(f.H,f.S,f.B);this._updateCMYK(g.C,g.M,g.Y,g.K);this._markSelect(e,2);}},_convertBaseOnHSB:function(b){var e=this._getHSBValue();var f=this._getHSBInput();var i=false;$H(f).forEach(function(l,m,k){if(l==b&&Math.round(e[m])!=b.value){i=true;}});if(i){var h=Math.round(f.H.value);var c=Math.round(f.S.value);var a=Math.round(f.B.value);if(!this._chkVaildHSB(h,c,a)){var e=this._htSelected.HSB;this._updateHSB(e.H,e.S,e.B);return;}else{this._htSelected.HSB={H:h,S:c,B:a};var e=this._htSelected.HSB;this._updateHSB(e.H,e.S,e.B);}var j=this.HSBtoRGB(h,c,a);var d=this._RGBtoHex(j.R,j.G,j.B);var g=this._hexToCMYK(d);this._updateRGB(j.R,j.G,j.B);this._updateCMYK(g.C,g.M,g.Y,g.K);this._updateHex(d);this._markSelect(d,2);}},_convertBaseOnCMYK:function(c){var i=this._getCMYKValue();var e=this._getCMYKInput();var j=false;$H(e).forEach(function(m,n,l){if(m==c&&Math.round(i[n])!=c.value){j=true;}});if(j){var a=Math.round(e.C.value);var g=Math.round(e.M.value);var b=Math.round(e.Y.value);var h=Math.round(e.K.value);if(!this._chkVaildCMYK(a,g,b,h)){var i=this._htSelected.CMYK;this._updateCMYK(i.C,i.M,i.Y,i.K);return;}else{this._htSelected.CMYK={C:a,M:g,Y:b,K:h};var i=this._htSelected.CMYK;this._updateCMYK(i.C,i.M,i.Y,i.K);}var k=this._CMYKtoRGB(a,g,b,h);var d=this._RGBtoHex(k.R,k.G,k.B);var f=this._RGBtoHSB(k.R,k.G,k.B);this._updateHex(d);this._updateHSB(f.H,f.S,f.B);this._updateRGB(k.R,k.G,k.B);this._markSelect(d,2);}},_clearSelected:function(){this._waElColors.forEach($Fn(function(c,d,b){$Element(c).removeClass("on");},this).bind());},_markSelect:function(d,e){e=(!e||isNaN(e))?0:e;var b=0;var a=null;var c=false;this._waElColors.forEach($Fn(function(g,h,f){if(g.innerHTML.toLowerCase().indexOf(d.toLowerCase())>-1&&!c){$Element(g).addClass("on");b++;if(b>=e){c=true;}}else{$Element(g).removeClass("on");}},this).bind());},_makeExpandColors:function(b){var f=new $A();var d=null;var c=b;for(var e=0,a=11;e<a;e++){b=this.lighterColor(b,0.07);f.push(this._oTplExpandColor.process({hex:b,iswht:b=="#ffffff"}));}f.reverse();b=c;for(var e=0,a=11;e<a;e++){f.push(this._oTplExpandColor.process({hex:b,iswht:b=="#ffffff"}));b=this.darkerColor(b,0.07);}$Element(this._elExpandColor).html(f.$value().join("")).show();f=null;this._refreshColorArray();},_refreshColorArray:function(){this._waElColors=$A($$("ul.lst_picker > li >a",this._elContent));},_hextoRGB:function(a){return this._oConverter.hextoRGB(a);},HSBtoRGB:function(b,a,c){return this._oConverter.HSBtoRGB(b,a,c);},_RGBtoHex:function(b,a,c){return"#"+this._oConverter.RGBtoHex(b,a,c);},_RGBtoHSB:function(b,a,c){return this._oConverter.RGBtoHSB(b,a,c);},_hexToCMYK:function(a){return this._oConverter.hexToCMYK(a);},_CMYKtoRGB:function(c,d,b,a){return this._oConverter.CMYKtoRGB(c,d,b,a);},_updateRGB:function(b,a,c){this._htSelected.RGB={R:b,G:a,B:c};this._elInputRGB_R.value=Math.round(b);this._elInputRGB_G.value=Math.round(a);this._elInputRGB_B.value=Math.round(c);},_updateHSB:function(b,a,c){this._htSelected.HSB={H:b,S:a,B:c};this._elInputHSB_H.value=Math.round(b);this._elInputHSB_S.value=Math.round(a);this._elInputHSB_B.value=Math.round(c);},_updateCMYK:function(c,d,b,a){this._htSelected.CMYK={C:c,M:d,Y:b,K:a};this._elInputC.value=Math.round(c);this._elInputM.value=Math.round(d);this._elInputY.value=Math.round(b);this._elInputK.value=Math.round(a);},_updateHex:function(a){this._elInputHex.value=a.toUpperCase();this._welColorDisplay.css("backgroundColor",a);},_getRGBValue:function(){return this._htSelected.RGB;},_getHSBValue:function(){return this._htSelected.HSB;},_getCMYKValue:function(){return this._htSelected.CMYK;},_getRGBInput:function(){return{R:this._elInputRGB_R,G:this._elInputRGB_G,B:this._elInputRGB_B};},_getHSBInput:function(){return{H:this._elInputHSB_H,S:this._elInputHSB_S,B:this._elInputHSB_B};},_getCMYKInput:function(){return{C:this._elInputC,M:this._elInputM,Y:this._elInputY,K:this._elInputK};},_chkVaildHex:function(a){if(a.length!=6){return false;}if(/[0-9a-f]{6}/i.test(a)!=true){return false;}return true;},_chkVaildRGB:function(c,b,d){var a=true;var e=$A([c,b,d]);e.forEach(function(g,h,f){g=g*1;if(isNaN(g)||(g<0||g>255)){a=false;$A.Break();}});return a;},_chkVaildHSB:function(b,a,d){var c=true;if(isNaN(b)||(b<0||b>360)){c=false;}if(isNaN(a)||(a<0||a>100)){c=false;}if(isNaN(d)||(d<0||d>100)){c=false;}return c;},_chkVaildCMYK:function(d,e,c,a){var b=true;var f=$A([d,e,c,a]);f.forEach(function(h,j,g){h=h*1;if(isNaN(h)||(h<0||h>100)){b=false;$A.Break();}});return b;},_changeColor:function(b,e,h){b=b.replace(/^\s*|\s*$/,"");b=b.replace(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i,"#$1$1$2$2$3$3");var g=Math.round(e*256)*(h?-1:1),c=b.match(new RegExp("^rgba?\\(\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])(?:\\s*,\\s*(0|1|0?\\.\\d+))?\\s*\\)$","i")),f=!!c&&c[4]!=null?c[4]:null,a=!!c?[c[1],c[2],c[3]]:b.replace(/^#?([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])/i,function(){return parseInt(arguments[1],16)+","+parseInt(arguments[2],16)+","+parseInt(arguments[3],16);}).split(/,/),d;return !!c?"rgb"+(f!==null?"a":"")+"("+Math[h?"max":"min"](parseInt(a[0],10)+g,h?0:255)+", "+Math[h?"max":"min"](parseInt(a[1],10)+g,h?0:255)+", "+Math[h?"max":"min"](parseInt(a[2],10)+g,h?0:255)+(f!==null?", "+f:"")+")":["#",this._pad(Math[h?"max":"min"](parseInt(a[0],10)+g,h?0:255).toString(16),2),this._pad(Math[h?"max":"min"](parseInt(a[1],10)+g,h?0:255).toString(16),2),this._pad(Math[h?"max":"min"](parseInt(a[2],10)+g,h?0:255).toString(16),2)].join("");},_pad:function(b,a){var c="0";b=b+"";while(b.length<a){b=c+b;}return b;},lighterColor:function(a,b){return this._changeColor(a,b,false);},darkerColor:function(a,b){return this._changeColor(a,b,true);},_clickCROnInputFocus:function(){if(typeof tCR=="function"){tCR("a="+nco_area_p9001+"&r=1&i="+nco_gdid_p9001);}}});