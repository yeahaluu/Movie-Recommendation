!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Controller=e():t.Controller=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=75)}([function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,n(41))},function(t,e,n){var r=n(0);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e,n){t.exports=n(60)},function(t,e,n){var r=n(37);t.exports=function(t,e){t.prototype=r(e.prototype),t.prototype.constructor=t,t.__proto__=e}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(1),i=n(42).f,o=n(44),a=n(6),s=n(21),u=n(22),c=n(5),f=function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e};t.exports=function(t,e){var n,l,h,p,d,v,_,g,y=t.target,m=t.global,b=t.stat,x=t.proto,w=m?r:b?r[y]:(r[y]||{}).prototype,L=m?a:a[y]||(a[y]={}),C=L.prototype;for(h in e)n=!o(m?h:y+(b?".":"#")+h,t.forced)&&w&&c(w,h),d=L[h],n&&(v=t.noTargetGet?(g=i(w,h))&&g.value:w[h]),p=n&&v?v:e[h],n&&typeof d==typeof p||(_=t.bind&&n?s(p,r):t.wrap&&n?f(p):x&&"function"==typeof p?s(Function.call,p):p,(t.sham||p&&p.sham||d&&d.sham)&&u(_,"sham",!0),L[h]=_,x&&(c(a,l=y+"Prototype")||u(a,l,{}),a[l][h]=p,t.real&&C&&!C[h]&&u(C,h,p)))}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(15),i=n(17);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(8);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,n){var r=n(2),i=n(0),o=n(5),a=Object.defineProperty,s={},u=function(t){throw t};t.exports=function(t,e){if(o(s,t))return s[t];e||(e={});var n=[][t],c=!!o(e,"ACCESSORS")&&e.ACCESSORS,f=o(e,0)?e[0]:u,l=o(e,1)?e[1]:undefined;return s[t]=!!n&&!i((function(){if(c&&!r)return!0;var t={length:-1};c?a(t,1,{enumerable:!0,get:u}):t[1]=1,n.call(t,f,l)}))}},function(t,e,n){var r=n(6);t.exports=function(t){return r[t+"Prototype"]}},function(t,e){t.exports=function(){function t(e,n){return new t.fn.init(e,n)}window.jQuery.extend(!0,t,this),t.superclass=this,t.fn=t.prototype=this(),t.fn.constructor=t,t.sub=this.sub,t.fn.init=function(n,r){var i=window.jQuery.fn.init.call(this,n,r,e);return i instanceof t?i:t(i)},t.fn.init.prototype=t.fn;var e=t(document);return t}.call(window.jQuery)},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(0),i=n(16),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(t==undefined)throw TypeError("Can't call method on "+t);return t}},function(t,e,n){var r=n(8);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(2),i=n(0),o=n(20);t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(1),i=n(8),o=r.document,a=i(o)&&i(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},function(t,e,n){var r=n(45);t.exports=function(t,e,n){if(r(t),e===undefined)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(2),i=n(23),o=n(14);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(2),i=n(19),o=n(10),a=n(18),s=Object.defineProperty;e.f=r?s:function(t,e,n){if(o(t),e=a(e,!0),o(n),i)try{return s(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(9),i=n(25),o=n(50),a=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),f=o(a,c);if(t&&n!=n){for(;c>f;)if((s=u[f++])!=s)return!0}else for(;c>f;f++)if((t||f in u)&&u[f]===n)return t||f||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,e,n){var r=n(26),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports={}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,n){var r=n(53),i=n(54);(t.exports=function(t,e){return i[t]||(i[t]=e!==undefined?e:{})})("versions",[]).push({version:"3.6.4",mode:r?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(t===undefined?"":t)+")_"+(++n+r).toString(36)}},function(t,e,n){var r=n(0);t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(33),i=n.n(r),o=n(4),a=n.n(o),s=function(t){function e(e){return t.call(this)||this}return a()(e,t),e.prototype.isLogin=function(){var t;return-1!==i()(t=document.cookie).call(t,"NID_SES")},e}(eg.Component)},function(t,e,n){t.exports=n(65)},function(t,e,n){var r=n(6),i=n(1),o=function(t){return"function"==typeof t?t:undefined};t.exports=function(t,e){return arguments.length<2?o(r[t])||o(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},function(t,e,n){var r=n(21),i=n(15),o=n(56),a=n(25),s=n(57),u=[].push,c=function(t){var e=1==t,n=2==t,c=3==t,f=4==t,l=6==t,h=5==t||l;return function(p,d,v,_){for(var g,y,m=o(p),b=i(m),x=r(d,v,3),w=a(b.length),L=0,C=_||s,S=e?C(p,w):n?C(p,0):undefined;w>L;L++)if((h||L in b)&&(y=x(g=b[L],L,m),t))if(e)S[L]=y;else if(y)switch(t){case 3:return!0;case 5:return g;case 6:return L;case 2:u.call(S,g)}else if(f)return!1;return l?-1:c||f?f:S}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},function(t,e,n){var r=n(1),i=n(29),o=n(5),a=n(30),s=n(31),u=n(59),c=i("wks"),f=r.Symbol,l=u?f:f&&f.withoutSetter||a;t.exports=function(t){return o(c,t)||(s&&o(f,t)?c[t]=f[t]:c[t]=l("Symbol."+t)),c[t]}},function(t,e,n){t.exports=n(38)},function(t,e,n){var r=n(39);t.exports=r},function(t,e,n){n(40);var r=n(6).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){n(7)({target:"Object",stat:!0,sham:!n(2)},{create:n(46)})},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(2),i=n(43),o=n(14),a=n(9),s=n(18),u=n(5),c=n(19),f=Object.getOwnPropertyDescriptor;e.f=r?f:function(t,e){if(t=a(t),e=s(e,!0),c)try{return f(t,e)}catch(n){}if(u(t,e))return o(!i.f.call(t,e),t[e])}},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},function(t,e,n){var r=n(0),i=/#|\.prototype\./,o=function(t,e){var n=s[a(t)];return n==c||n!=u&&("function"==typeof e?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,n){var r,i=n(10),o=n(47),a=n(28),s=n(27),u=n(51),c=n(20),f=n(52),l=f("IE_PROTO"),h=function(){},p=function(t){return"<script>"+t+"<\/script>"},d=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(i){}var t,e;d=r?function(t){t.write(p("")),t.close();var e=t.parentWindow.Object;return t=null,e}(r):((e=c("iframe")).style.display="none",u.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(p("document.F=Object")),t.close(),t.F);for(var n=a.length;n--;)delete d.prototype[a[n]];return d()};s[l]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(h.prototype=i(t),n=new h,h.prototype=null,n[l]=t):n=d(),e===undefined?n:o(n,e)}},function(t,e,n){var r=n(2),i=n(23),o=n(10),a=n(48);t.exports=r?Object.defineProperties:function(t,e){o(t);for(var n,r=a(e),s=r.length,u=0;s>u;)i.f(t,n=r[u++],e[n]);return t}},function(t,e,n){var r=n(49),i=n(28);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(5),i=n(9),o=n(24).indexOf,a=n(27);t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)!r(a,n)&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var r=n(26),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},function(t,e,n){var r=n(34);t.exports=r("document","documentElement")},function(t,e,n){var r=n(29),i=n(30),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},function(t,e){t.exports=!0},function(t,e,n){var r=n(1),i=n(55),o=r["__core-js_shared__"]||i("__core-js_shared__",{});t.exports=o},function(t,e,n){var r=n(1),i=n(22);t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},function(t,e,n){var r=n(17);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(8),i=n(58),o=n(36)("species");t.exports=function(t,e){var n;return i(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=undefined):n=undefined),new(n===undefined?Array:n)(0===e?0:e)}},function(t,e,n){var r=n(16);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(31);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,n){var r=n(61);t.exports=r},function(t,e,n){var r=n(62),i=Array.prototype;t.exports=function(t){var e=t.find;return t===i||t instanceof Array&&e===i.find?r:e}},function(t,e,n){n(63);var r=n(12);t.exports=r("Array").find},function(t,e,n){"use strict";var r=n(7),i=n(35).find,o=n(64),a=n(11),s=!0,u=a("find");"find"in[]&&Array(1).find((function(){s=!1})),r({target:"Array",proto:!0,forced:s||!u},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:undefined)}}),o("find")},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(66);t.exports=r},function(t,e,n){var r=n(67),i=Array.prototype;t.exports=function(t){var e=t.indexOf;return t===i||t instanceof Array&&e===i.indexOf?r:e}},function(t,e,n){n(68);var r=n(12);t.exports=r("Array").indexOf},function(t,e,n){"use strict";var r=n(7),i=n(24).indexOf,o=n(69),a=n(11),s=[].indexOf,u=!!s&&1/[1].indexOf(1,-0)<0,c=o("indexOf"),f=a("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:u||!c||!f},{indexOf:function(t){return u?s.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:undefined)}})},function(t,e,n){"use strict";var r=n(0);t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},function(t,e,n){t.exports=n(78)},function(t,e,n){var r=n(34);t.exports=r("navigator","userAgent")||""},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return p}));var r=n(73),i=n.n(r),o=n(70),a=n.n(o),s=n(3),u=n.n(s),c=n(4),f=n.n(c),l=n(74),h=n(32),p=function(e){function n(t){var n;return(n=e.call(this)||this).option(t),n._initModules(),n._assignGlobalVars(),n}f()(n,e);var r=n.prototype;return r.toggleLayer=function(t){this._assignLocalVars(t),this._$saveLayer.is(":visible")?(this._hideLayer(),this.trigger("hideLayer",t)):(this._isLogin&&this._check(t),this._hideAllLayer(),this._showLayer(),this.trigger("showLayer",t))},r.toggleButtonLayer=function(t){var e=this;this._assignLocalVars(t);var n=this._$buttonLayer.is(":visible"),r=this._$buttonTrigger.hasClass(this._className.active);this._isLogin?(n&&this._cancelAutoClose(),this._hideAllLayer(),r?(this._getToken().done((function(t){e._deleteKeep(t).done((function(){e._showButtonLayer(),-1!==e._autoCloseDelay&&e._setAutoClose(e._autoCloseDelay)}))})),void 0!==t.attr("data-cr-off")&&this.trigger("delete",t)):(this._getToken().done((function(t){e._createKeep(t).done((function(){e._showButtonLayer(),-1!==e._autoCloseDelay&&e._setAutoClose(e._autoCloseDelay)}))})),void 0!==t.attr("data-cr-on")&&this.trigger("create",t))):location.href=this._loginUrl.replace("{=location}",encodeURIComponent(location.href))},r.hideAllLayer=function(){var e=this.option().selector;t(e.saveLayer).hide(),t(e.trigger).attr("aria-pressed","false")},r.toggleSave=function(t,e){if(this._isLogin){if(!this._$save||this._$save.length<1){var n,r=this.option().selector,i=u()(n=e.closest(r.keepWrap)).call(n,r.trigger);this._assignLocalVars(i)}var o=this._$save.hasClass(this._className.active);t.preventDefault(),o?(this._delete(),void 0!==e.attr("data-cr-off")&&this.trigger("delete",e)):(this._create(),void 0!==e.attr("data-cr-on")&&this.trigger("create",e))}else location.href=this._loginUrl.replace("{=location}",encodeURIComponent(location.href))},r.checkSave=function(t){this._isLogin&&this._check(t)},r._initModules=function(){this._oRequest=new l.a,this._oLogin=new h.a},r._setLoginUrl=function(t){this._loginUrl=t},r._assignGlobalVars=function(){var t=this.option().loginUrl;this._loginUrl=t,this._isLogin=this._oLogin.isLogin()},r._assignLocalVars=function(t){var e,n,r,i,o,a,s=this.option(),c=s.text,f=s.selector,l=s.className,h=s.autoCloseDelay,p=s.api;this._text=c,this._selector=f,this._className=l,this._$trigger=t,this._$wrap=this._$trigger.closest(this._selector.keepWrap),this._$saveTrigger=u()(e=this._$wrap).call(e,this._selector.trigger),this._$saveLayer=u()(n=this._$wrap).call(n,this._selector.saveLayer),this._$save=u()(r=this._$saveLayer).call(r,this._selector.save),this._$buttonTrigger=u()(i=this._$wrap).call(i,this._selector.buttonTrigger),this._$buttonLayer=u()(o=this._$wrap).call(o,this._selector.buttonLayer),this._$buttonSave=u()(a=this._$buttonLayer).call(a,this._selector.buttonSave),this._autoCloseDelay=h,this._api=p,this._initOption(this._$save.data()),this._attachEvent(),this._cancelAutoClose()},r._attachEvent=function(){var e=this;this._isAttachEvent||(t(window).on("click",(function(t){return e._onClickWindow(t)})),this._isAttachEvent=!0)},r._initOption=function(t){void 0===t&&(t={}),this._type=t.type||this.option("type")},r._onClickWindow=function(e){var n=t(e.target);if(!(this._$trigger.length<1)){var r,i,o=!1,s=!1;if(this._$saveLayer.is(":visible"))(n.is(this._$trigger)||a()(r=n.parents()).call(r,this._$trigger).length>0)&&(o=!0),(n.is(this._$saveLayer)||a()(i=n.parents()).call(i,this._$saveLayer).length>0)&&(s=!0),o||s||(this._hideLayer(),this._cancelAutoClose())}},r._hideAllLayer=function(){t(this._selector.saveLayer).hide(),t(this._selector.trigger).attr("aria-pressed","false"),t(this._selector.buttonLayer).hide(),t(this._selector.buttonTrigger).attr("aria-pressed","false")},r._showLayer=function(){this._$saveLayer.removeClass(this._className.fadeOut).addClass(this._className.fadeIn),this._$saveLayer.show(),this._$trigger.attr("aria-pressed","true")},r._hideLayer=function(){var t=this,e=window.animationEvent?"animationend":"webkitAnimationEnd";this._$saveLayer.removeClass(this._className.fadeIn).addClass(this._className.fadeOut),this._$saveLayer.one(e,(function(e){t._$saveLayer.hide(),t._$saveLayer.removeClass(t._className.fadeOut)})),this._$trigger.attr("aria-pressed","false")},r._showButtonLayer=function(){this._$buttonLayer.removeClass(this._className.fadeOut).addClass(this._className.fadeIn),this._$buttonLayer.show(),this._$buttonTrigger.attr("aria-pressed","true")},r._hideButtonLayer=function(){var t=this,e=window.animationEvent?"animationend":"webkitAnimationEnd";this._$buttonLayer.removeClass(this._className.fadeIn).addClass(this._className.fadeOut),this._$buttonTrigger.attr("aria-pressed","false"),this._$buttonLayer.one(e,(function(e){t._$buttonLayer.hide(),t._$buttonLayer.removeClass(t._className.fadeOut)}))},r._changeTriggerButton=function(t,e){var n=this._$trigger;n[t?"addClass":"removeClass"](this._className.active),n.attr("data-activity-id",e)},r._changeSaveButton=function(t){var e=null;if(this._$save&&this._$save.length>0)e=this._$save;else{if(!(this._$buttonSave&&this._$buttonSave.length>0))return;e=this._$buttonSave}var n=u()(e).call(e,"i").length?u()(e).call(e,"i"):e,r=e.data(t);switch(t){case"saved":case"already":e.removeClass(this._className.dimmed).addClass(this._className.active);break;case"save":e.removeClass(this._className.dimmed).removeClass(this._className.active);break;case"nosave":e.addClass(this._className.dimmed).removeClass(this._className.active)}"nosave"===t||"already"===t?alert(r||this._text[t]):n.text(r||this._text[t])},r._check=function(t){var e=this;void 0!==t&&this._assignLocalVars(t);var n=this._$trigger,r=this._api.check,i=n.attr("data-keep-url")||n.attr("data-url");return void 0!==i&&(r=r.replace("{=url}",encodeURIComponent(i)),this._oRequest.requestApi(r,null,"GET").done((function(t){if(t&&t.success)if(t.result.exist){var n=t.result.activityId;e._changeTriggerButton(!0,n),e._changeSaveButton("saved")}else e._changeTriggerButton(!1,""),e._changeSaveButton("save")})).fail((function(){})))},r._getToken=function(){var e=this,n=t.Deferred(),r=this._api.token;return this._oRequest.requestApi(r,null,"GET").done((function(t){t&&t.result&&(e._activityId=t.result.activityId),n.resolve(t)})).fail((function(){n.reject()})),n.promise()},r._createKeep=function(e){var n=this,r=t.Deferred(),i=this._$trigger.attr("data-keep-url")||this._$trigger.attr("data-url"),o=this._api.create,a={query:window.headerfooter_query_encoded,url:encodeURIComponent(i),imageId:this._$trigger.attr("data-image-id"),token:e.result.token,timestamp:e.result.timestamp};return this._oRequest.requestApi(o,a,"POST").done((function(t){if(t){if(t.success){var e=t.result.userActivity._id;n._changeTriggerButton(!0,e),n._changeSaveButton("saved")}else n._check();r.resolve(t)}})).fail((function(){r.reject()})),r.promise()},r._deleteKeep=function(e){var n=this,r=t.Deferred(),i=this._api["delete"],o={activityId:this._$trigger.attr("data-activity-id"),token:e.result.token,timestamp:e.result.timestamp};return this._oRequest.requestApi(i,o,"POST").done((function(t){t&&t.success?(n._changeTriggerButton(!1,""),n._changeSaveButton("save")):n._check(),r.resolve(t)})).fail((function(){r.reject()})),r.promise()},r._create=function(){var t=this;this._getToken().done((function(e){t._createKeep(e)}))},r._delete=function(){var t=this;this._getToken().done((function(e){t._deleteKeep(e)}))},r._setAutoClose=function(t){var e=this;this._autoCloseTimer=i()((function(){e._hideButtonLayer()}),t)},r._cancelAutoClose=function(){this._autoCloseTimer&&clearTimeout(this._autoCloseTimer),this._autoCloseTimer=null},n}(eg.Component)}).call(this,n(13))},function(t,e,n){t.exports=n(76)},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return o}));var r=n(4),i=n.n(r),o=function(e){function n(t){return e.call(this)||this}return i()(n,e),n.prototype.requestApi=function(e,n,r,i){return void 0===i&&(i=!1),t.ajax({url:e,type:r,data:n,xhrFields:{withCredentials:!0},cache:i,timeout:3e3})},n}(eg.Component)}).call(this,n(13))},function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"default",(function(){return a}));var r=n(4),i=n.n(r),o=n(72),a=function(e){function n(t){var n;return(n=e.call(this)||this).option({type:"layer",text:{save:"Keep에 저장",saved:"저장된 문서입니다.",nosave:"저장할 수 없는 문서입니다.",already:"이미 저장된 문서 입니다."},autoCloseDelay:2e3,selector:{keepWrap:"._keep_wrap",trigger:"._keep_trigger",saveLayer:"._keep_save_layer",save:"._keep_save",buttonTrigger:"._keep_button_trigger",buttonLayer:"._keep_button_layer",buttonSave:"._keep_button_save"},className:{fadeIn:"ani_fadein",fadeOut:"ani_fadeout",active:"active",dimmed:"dimmed"}}),n.option(t),n._initModules(),n._attachEvents(),n}i()(n,e);var r=n.prototype;return r.check=function(e){var n=this,r=void 0===e?{}:e,i=r.btn,o=r.rootSelector,a=this.option().selector;if(this._selector=a,i){var s=i.jquery?i:t(i);this._oSave.checkSave(s)}else{t((o||"")+" "+this._selector.buttonTrigger).each((function(e,r){var i=t(r);n._oSave.checkSave(i)}))}},r.updateLoginUrl=function(t){t&&this._oSave._setLoginUrl(t)},r._attachEvents=function(){var e=this,n=this.option().selector;t(document).on("click",n.buttonTrigger,(function(t){return e._onClickButtonTrigger(t)})),t(document).on("click",n.trigger,(function(t){return e._onClickTrigger(t)})),t(document).on("click",n.save,(function(t){return e._onClickSave(t)})),this._oSave.on({create:function(t){e.trigger("create",t)},"delete":function(t){e.trigger("delete",t)},showLayer:function(t){e.trigger("showLayer",t)},hideLayer:function(t){e.trigger("hideLayer",t)}})},r._initModules=function(){this._oSave=new o.a(this.option())},r._onClickTrigger=function(e){e.preventDefault();var n=t(e.currentTarget);this._oSave.toggleLayer(n)},r._onClickSave=function(e){e.preventDefault();var n=t(e.currentTarget);this._oSave.toggleSave(e,n)},r._onClickButtonTrigger=function(e){e.preventDefault();var n=t(e.currentTarget);this._oSave.toggleButtonLayer(n)},n}(eg.Component)}.call(this,n(13))},function(t,e,n){n(77);var r=n(6);t.exports=r.setTimeout},function(t,e,n){var r=n(7),i=n(1),o=n(71),a=[].slice,s=function(t){return function(e,n){var r=arguments.length>2,i=r?a.call(arguments,2):undefined;return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};r({global:!0,bind:!0,forced:/MSIE .\./.test(o)},{setTimeout:s(i.setTimeout),setInterval:s(i.setInterval)})},function(t,e,n){var r=n(79);t.exports=r},function(t,e,n){var r=n(80),i=Array.prototype;t.exports=function(t){var e=t.filter;return t===i||t instanceof Array&&e===i.filter?r:e}},function(t,e,n){n(81);var r=n(12);t.exports=r("Array").filter},function(t,e,n){"use strict";var r=n(7),i=n(35).filter,o=n(82),a=n(11),s=o("filter"),u=a("filter");r({target:"Array",proto:!0,forced:!s||!u},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:undefined)}})},function(t,e,n){var r=n(0),i=n(36),o=n(83),a=i("species");t.exports=function(t){return o>=51||!r((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},function(t,e,n){var r,i,o=n(1),a=n(71),s=o.process,u=s&&s.versions,c=u&&u.v8;c?i=(r=c.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=r[1]),t.exports=i&&+i}])["default"]}));
//# sourceMappingURL=Controller.js.map